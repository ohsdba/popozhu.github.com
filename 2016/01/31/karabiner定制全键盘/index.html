<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    

    <title>karabiner定制全键盘 | popozhu</title>

    

    <!-- css -->
    <link href="http://fonts.useso.com/css?family=Open+Sans" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/css/style.css" type="text/css">

    </head>

    <body>
	<div class="container">
	    <div class="banner">
    <div>
        <span class="site-title"> <a href="/" id="logo">popozhu</a> </span>

        
    </div>

    <div class="banner-right">
        <span class="banner-item"> <a href="/archives"> Misc </a> </span>
        <span class="banner-item"> <a href="/about"> About </a> </span>
    </div>
</div>


	    <section id="main"><article class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
	<header class="article-header">
	    <div class="article-title">
		<div class="title">karabiner定制全键盘</div> 
		<small>
		    <time datetime="2016-01-31T14:44:08.000Z" itemprop="datePublished">January 31 2016</time>
		</small>
	    </div>
	</header>
    

    <div class="article-entry" itemprop="articleBody">
	
	    
	    
		<div class="article-toc"> Toc <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#初衷"><span class="toc-text">初衷</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Karabiner"><span class="toc-text">Karabiner</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#模式"><span class="toc-text">模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#激活"><span class="toc-text">激活</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参数"><span class="toc-text">参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#辅助快捷键"><span class="toc-text">辅助快捷键</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#配置文件"><span class="toc-text">配置文件</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#题外话"><span class="toc-text">题外话</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#模拟_HHKB"><span class="toc-text">模拟 HHKB</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#启动模式"><span class="toc-text">启动模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#其他"><span class="toc-text">其他</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ref"><span class="toc-text">ref</span></a></li></ol> </div>
	    

	    <h1 id="初衷">初衷</h1><p>一开始是左手手指有点酸，估计是尾指按键盘左边的<code>Ctrl</code>键次数有点多，为此把左边的<code>Ctrl</code>键盘跟<code>CapsLock</code>对换了一下，这样用了有一年，使用的软件是<code>karabiner</code>和它的一个组件<code>Seil</code>，之所以需要<code>Seil</code>，<code>Karabiner</code>说是<code>CapsLock</code>键的<a href="https://pqrs.org/osx/karabiner/faq.html.en#capslock" target="_blank" rel="external">替换（重新映射）需要特殊处理</a>，偶尔还会在 OSX 系统升级后出现映射失效，需要等待作者来做软件升级。</p>
<p>症状基本解决，而且也认同：<code>Ctrl</code>键位置调换后，一定程度上让各种快捷键用起来更为舒适。工作中是在系统自带终端下，启动<code>tmux</code> + <code>vim</code>，<code>tmux</code>的前缀键我使用的是<code>ctrl+a</code>。</p>
<p>因此大约一年后，这次是右手手臂酸了，是我坐姿的问题，也另发现，当我几条不用触摸板（我是触摸板的重度用户，各种手势，操作还算挺快挺频繁），改用鼠标，症状又有所缓解。用回触摸板，又恢复，依次循环几次后，觉得可以试试不用触摸板。</p>
<p>极端一些，能不能不用触摸板也不用鼠标？嗯，使用<code>karabiner</code>一年后才发现它也有提供这功能：<code>mouse keys mode</code>.</p>
<h1 id="Karabiner">Karabiner</h1><p><code>Karabiner</code> 是一个修改键位映射的软件。由于我需要修改到<code>CapsLock</code>键盘，也安装有组件<code>Seil</code>。并把两者都加到我的开机启动项里。</p>
<h2 id="模式">模式</h2><p><code>Karabiner</code>预先设置后了多种模式，比如<code>vim</code>模式、<code>emacs</code>模式等，再加上最近发现的<code>mouse keys mode</code>模式，用于解放触摸板和鼠标。</p>
<p>在<code>Karabiner</code>设置里的第一个tab：<code>Change key</code>里搜索<code>mouse keys</code>就能看到这种模式了，当前是<code>Mouse Keys Mode V2</code>，相比 V1 版本，这个版本相对更容易触发这种模式，对输入干扰也相对少一些（考虑输入过程中突然需要移动鼠标到其他位置）。以下只说 V2 版本的使用，当然，先要在设置里选中<code>Mouse Keys Mode V2</code>，后续的各种快捷键才能生效。</p>
<h2 id="激活">激活</h2><p>按住<code>d</code>键，再按 <code>hjkl</code> 中的任何一个键位来<strong>左下上右</strong>地移动鼠标。比如我要向上移动鼠标，只需按住<code>d</code>不放开，再按一下<code>k</code>。</p>
<p>鼠标移动后，光标并没移动，需要在鼠标确定位置后，再按一次<strong>鼠标左键</strong>，默认是<code>d+v</code>。比如我需要在当前文本里修改第10行第3列的错别字，需要两个步骤，先<code>d+hjkl</code>多次移动鼠标到第10行第3列这里，再按<code>d+v</code>，让光标定位在错别字后面，删除这个错别字，输入正确的字。</p>
<p>相应地，右键是<code>d+n</code>。</p>
<p>浏览网页一般需要向下滚动页面，即 scroll，取首字母<code>s</code>，跟<code>d+hjkl</code>的前缀键<code>d</code>组合，即<code>d+s</code>，再通过<code>hjkl</code>决定滚动的方向。在网页向下滚动的例子中，则是<code>d+s+j</code>。个人使用起来，先按住<code>d</code>，<code>s</code>稍微慢几百毫秒，成功率更高，需要时间适应。</p>
<p>组合起来后，当我操作鼠标时，基本需要一直按住<code>d</code>键……</p>
<p>老实说，无论是 v1 或 v2 版本，直接由字符键来激活模式，都觉得很不理想，影响输入。我在输入时需要用到d、s这几个键，都需要稍微滞钝一下，避免激活了模式，一旦激活，当前输入就无法获得我预期的词组。</p>
<h2 id="参数">参数</h2><p>根据<code>karabiner</code>设置里的提示，我修改了两个参数：</p>
<ul>
<li><code>__BlockUntilKeyUp__</code>，其<code>Timeout</code>默认值是 200ms，我修改为 100ms，减少阻塞</li>
<li><code>Holding Key to Key</code>，其<code>Holding Threshold</code>默认直是 200ms，也修改为 100ms，降低阀值，更迅速地激活模式，这个参数还在测试中。</li>
</ul>
<h2 id="辅助快捷键">辅助快捷键</h2><p>有时候只需要在字里行间稍微移动一下，通过<code>emacs</code>风格的几个快捷键，更为方便: <code>control+pnbf</code>，分别是上、下、左、右。</p>
<p>同时另有<code>contrl+a</code>移动到行首，<code>control+e</code>移动好行末。</p>
<p>搜索<code>emacs mode</code>，可按需开启更多快捷键。</p>
<h1 id="配置文件">配置文件</h1><p><code>karabiner</code>的配置文件放在 <a href="https://github.com/popozhu/karabiner" target="_blank" rel="external">github</a> 上。</p>
<p><code>karabiner</code>先加载<code>private.xml</code>文件，路径默认为：</p>
<pre><code>${HOME}&#39;/Library/Application Support/Karabiner&#39;/private.xml
</code></pre><p>在该配置文件中，我再包含了<code>hhkb.xml</code>和<code>launch_app.xml</code>相关的两个配置文件。</p>
<h1 id="题外话">题外话</h1><p>后续是题外话了。</p>
<h2 id="模拟_HHKB">模拟 HHKB</h2><p>一个是我一直想买个hhkb键，假若我能适应这种无触摸板无鼠标的操作，那就可以剁手了。为此我也提前按hhkb的键位分布设置了一些映射。</p>
<ul>
<li>fn+asd：分别是音量减少、增大、静音</li>
<li>fn+1~9：分别对应 F1~F9 的功能键</li>
<li>fn+k、fn+,：分别对应首页、页末</li>
<li>fn+l、fn+.：分别对应上一页、下一页</li>
<li>fn+[、fn+/：分别是上、下</li>
<li>fn+;、fn+’：分别是左、右</li>
</ul>
<h2 id="启动模式">启动模式</h2><p>开启<code>karabiner</code>的<code>Launcher mode</code>，以字母键<code>o</code>为前缀，再加一个其他键，来启动某个软件、或打开一个url，或执行一句shell。<br>自带的有：</p>
<ul>
<li>O+A: Activity Monitor </li>
<li>O+Q: Dictionary </li>
<li>O+D: show Desktop </li>
<li>O+space: Launchpad </li>
<li>O+M: Mail </li>
<li>O+Tab: Mission Control </li>
<li>O+F: Finder </li>
<li>O+F,D: open Desktop folder by Finder </li>
<li>O+F,F: open Home folder by Finder </li>
<li>O+S: Safari </li>
<li>O+T: Terminal </li>
</ul>
<h2 id="其他">其他</h2><ul>
<li>把<code>CapsLock</code>键修改为<code>Control</code>键之外，设置双击<code>Control</code>键来切换<code>CapsLock</code></li>
<li><code>shift+F1</code>来启动<code>Dashboard</code>，Dashboard 中有豆瓣fm</li>
</ul>
<p>同时另有<code>escape</code>键跟<code>backquote</code>键对换，<code>delete</code>键跟<code>backslash</code>键对换，则直接从<code>karabiner</code>自带的方案中启动即可。</p>
<h1 id="ref">ref</h1><ul>
<li><a href="https://github.com/tekezo/Karabiner/blob/master/src/bridge/generator/keycode/data/ConsumerKeyCode.data" target="_blank" rel="external">ConsumerKeyCode</a></li>
</ul>
<p>– EOF –<br><br></p>

	

	<div>
	    <div>Categories: <a class="category-link" href="/categories/osx/">osx</a> </div>
	    <div>Tags: <a class="tag-link" href="/tags/osx/">osx</a> </div>
	</div>
    </div>

    <hr />
    <footer class="article-footer">
      
        <a href="http://popozhu.github.io/2016/01/31/karabiner定制全键盘/#disqus_thread" class="article-comment-link"></a>
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2015/08/08/using-hexo-3/" id="article-nav-older" class="article-nav-link-wrap">
      <span class="article-nav-title">using hexo 3</span>
      <span class="article-nav-caption">&raquo;</span>
    </a>
  
</nav>


  
</article>


<section id="comments">
  <div id="disqus_thread"> </div>
</section>


</section>

	    <footer id="footer">
    popozhu &copy; 2016 
</footer>

	</div>

	
<!--
<script src="//ajax.useso.com/ajax/libs/jquery/2.0.3/jquery.min.js" type="text/javascript"></script>
-->


<script>
  var disqus_shortname = 'popozhu';
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>


<script src="/js/script.js" type="text/javascript"></script>


    </body>
</html>
