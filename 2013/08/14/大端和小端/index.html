<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    

    <title>大端和小端 | popozhu</title>

    

    <!-- css -->
    <link href="http://fonts.useso.com/css?family=Open+Sans" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/css/style.css">

    </head>

    <body>
	<div class="container">
	    <div class="banner">
    <div>
        <span class="site-title"> <a href="/" id="logo">popozhu</a> </span>

        
    </div>

    <div class="banner-right">
        <span class="banner-item"> <a href="/archives"> Misc </a> </span>
        <span class="banner-item"> <a href="/about"> About </a> </span>
    </div>
</div>


	    <section id="main"><article class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
	<header class="article-header">
	    <div class="article-title">
		<div class="title">大端和小端</div> 
		<small>
		    <time datetime="2013-08-14T15:11:57.000Z" itemprop="datePublished">August 14 2013</time>
		</small>
	    </div>
	</header>
    

    <div class="article-entry" itemprop="articleBody">
	
	    
	    

	    <p>&#x4EE5;&#x524D;&#x6CA1;&#x7406;&#x89E3;&#x5927;&#x7AEF;&#x548C;&#x5C0F;&#x7AEF;&#xFF0C;<a href="http://blog.csdn.net/ce123_zhouwei/article/details/6971544" target="_blank" rel="external">&#x8BE6;&#x89E3;&#x5927;&#x7AEF;&#x6A21;&#x5F0F;&#x548C;&#x5C0F;&#x7AEF;&#x6A21;&#x5F0F;</a>&#x8FD9;&#x91CC;&#x5BF9;&#x4E8E;&#x6982;&#x5FF5;&#x4E0A;&#x8BB2;&#x5F97;&#x5F88;&#x8BE6;&#x7EC6;&#xFF0C;&#x518D;&#x6B21;&#x6E29;&#x4E60;&#x4E86;&#x4E00;&#x4E0B;&#x3002;  </p>
<p>&#x5BF9;&#x4E8E;linux&#xFF0C;&#x4EE5;&#x6211;&#x5DE5;&#x4F5C;&#x4E2D;&#x4F7F;&#x7528;&#x7684;centos&#x4E3A;&#x4F8B;&#xFF0C;&#x5728;&#x5934;&#x6587;&#x4E2D;<code>/usr/include/endian.h</code>&#x4E2D;&#x6211;&#x770B;&#x5230;&#x5982;&#x4E0B;&#x5B9A;&#x4E49;:</p>
<pre><code class="cpp">/* Definitions for byte order, according to significance of bytes,
   from low addresses to high addresses.  The value is what you get by
   putting &apos;4&apos; in the most significant byte, &apos;3&apos; in the second most
   significant byte, &apos;2&apos; in the second least significant byte, and &apos;1&apos;
   in the least significant byte, and then writing down one digit for
   each byte, starting with the byte at the lowest address at the left,
   and proceeding to the byte with the highest address at the right.  */

#define __LITTLE_ENDIAN 1234
#define __BIG_ENDIAN    4321
</code></pre>
<p>&#x8FD9;&#x91CC;&#x5B9A;&#x4E49;&#x4E86;&#x5B57;&#x8282;&#x5E8F;&#xFF0C;&#x4ECE;&#x5DE6;&#x8FB9;&#x5230;&#x53F3;&#x8FB9;&#xFF0C;&#x5185;&#x5B58;&#x5730;&#x5740;&#x7531;&#x4F4E;&#x5230;&#x9AD8;&#xFF0C;&#x4F9D;&#x6B21;&#x5B58;&#x653E;&#x987A;&#x5E8F;&#x5982;&#x679C;&#x4E3A;&#xFF1A;&#x6700;&#x4F4E;&#x6709;&#x6548;&#x4F4D;&#xFF0D;&#x6B21;&#x6709;&#x6548;&#x4F4D;&#xFF0D;&#x6709;&#x6548;&#x4F4D;&#xFF0D;&#x6700;&#x9AD8;&#x6709;&#x6548;&#x4F4D;&#xFF0C;&#x5219;&#x5B9A;&#x4E49;&#x4E3A;&#x5C0F;&#x7AEF;&#x3002;&#x6570;&#x5B57;4&#x8868;&#x793A;&#x6700;&#x9AD8;&#x6709;&#x6548;&#x4F4D;&#xFF0C;&#x4ECE;4&#x5230;1&#xFF0C;&#x4F9D;&#x6B21;&#x9012;&#x51CF;&#x3002;<br>&#x7406;&#x6E05;&#x6982;&#x5FF5;&#x65F6;&#xFF0C; &#x4E00;&#x4E2A;&#x662F;&#x8981;&#x6CE8;&#x610F;&#x5185;&#x5B58;&#x5730;&#x5740;&#x7684;&#x65B9;&#x5411;&#xFF0C;&#x53E6;&#x4E00;&#x4E2A;&#x662F;&#x8981;&#x660E;&#x767D;&#x5B57;&#x8282;&#x7684;&#x5B58;&#x653E;&#x4F4D;&#x7F6E;&#x3002;<br>&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#xFF0C;&#x5BF9;&#x4E8E;&#x4E00;&#x4E2A;&#x5341;&#x516D;&#x8FDB;&#x5236;&#x8868;&#x793A;&#x7684;&#x6570;&#xFF1A;0x1234&#xFF0C;&#x9700;&#x8981;2&#x4E2A;&#x5B57;&#x8282;&#x6765;&#x5B58;&#x653E;&#xFF0C;&#x653E;&#x5230;&#x4F4E;&#x4F4D;&#x5B57;&#x8282;&#x548C;&#x9AD8;&#x4F4D;&#x5B57;&#x8282;&#x3002;  </p>
<ol>
<li>&#x5C0F;&#x7AEF;&#xFF1A;&#x4F4E;&#x4F4D;&#x5B57;&#x8282;(0x34)&#xFF0C;&#x9AD8;&#x4F4D;&#x5B57;&#x8282;(0x12)&#x3002;  </li>
<li>&#x5927;&#x7AEF;&#xFF1A;&#x4F4E;&#x4F4D;&#x5B57;&#x8282;(0x12)&#xFF0C;&#x9AD8;&#x4F4D;&#x5B57;&#x8282;(0x34)&#x3002;&#x8DDF;<em>&#x5B57;&#x7B26;&#x4E32;</em>&#x7684;&#x987A;&#x5E8F;&#x7C7B;&#x4F3C;&#x3002; </li>
</ol>
<p>&#x53EF;&#x4EE5;&#x7528;&#x4EE3;&#x7801;&#x9A8C;&#x8BC1;&#xFF1A;</p>
<pre><code class="cpp">#include &lt;stdio.h&gt;

int main()
{

    // &#x65B9;&#x6CD5;1
    int a = 0x1234;
    // &#x901A;&#x8FC7;&#x5C06;int&#x5F3A;&#x5236;&#x7C7B;&#x578B;&#x8F6C;&#x6362;&#x6210;char&#x5355;&#x5B57;&#x8282;&#xFF0C;&#x901A;&#x8FC7;&#x5224;&#x65AD;&#x8D77;&#x59CB;&#x5B58;&#x50A8;&#x4F4D;&#x7F6E;
    // &#x5373;&#x628A;a&#x7684;&#x4F4E;&#x5B57;&#x8282;&#x4E0A;&#x7684;&#x5185;&#x5BB9;&#x590D;&#x5236;&#x7ED9;b
    char b = *(char*)&amp;a;
    if (b == 0x12){
        printf(&quot;big endian\n&quot;);
    }
    if (b == 0x34){
        printf(&quot;little endian\n&quot;);
    }


    // &#x65B9;&#x6CD5;2
    // &#x8054;&#x5408;&#x4F53;union&#x7684;&#x5B58;&#x653E;&#x987A;&#x5E8F;&#x662F;&#x6240;&#x6709;&#x6210;&#x5458;&#x90FD;&#x4ECE;&#x4F4E;&#x5730;&#x5740;&#x5F00;&#x59CB;&#x5B58;&#x653E;&#xFF0C;
    // &#x5229;&#x7528;&#x8BE5;&#x7279;&#x6027;&#x53EF;&#x4EE5;&#x8F7B;&#x677E;&#x5730;&#x83B7;&#x5F97;&#x4E86;CPU&#x5BF9;&#x5185;&#x5B58;&#x91C7;&#x7528;Little-endian&#x8FD8;&#x662F;Big-endian&#x6A21;&#x5F0F;
    union Num 
    {
        int a;
        char b; //&#x4F4E;&#x5730;&#x5740;&#x5B57;&#x8282;
    };

    union Num num;
    num.a = 0x1234;

    if (num.b == 0x12){
        printf(&quot;big endian\n&quot;);
    }
    if (num.b == 0x34){
        printf(&quot;little endian\n&quot;);
    }


    // &#x65B9;&#x6CD5;3
    // &#x901A;&#x8FC7;&#x5B8F;&#x6765;&#x5224;&#x65AD;
#if __BYTE_ORDER != __LITTLE_ENDIAN
    printf(&quot;big endian\n&quot;);
#endif

#if __BYTE_ORDER == __LITTLE_ENDIAN
    printf(&quot;little endian\n&quot;);
#endif


    return 0;
}
</code></pre>
<p>&#x65B9;&#x6CD5;3&#x53EF;&#x80FD;&#x66F4;&#x5B9E;&#x7528;&#x4E9B;&#xFF0C;&#x5728;&#x5934;&#x6587;&#x4EF6;<code>/usr/include/bits/endian.h</code>&#x4E2D;&#x5982;&#x4E0B;&#x5B9A;&#x4E49;&#xFF1A;</p>
<pre><code class="cpp">/* x86_64 is little-endian.  */

#define __BYTE_ORDER __LITTLE_ENDIAN
</code></pre>
<p>x86&#x67B6;&#x6784;&#x7684;cpu&#xFF0C;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x5C0F;&#x7AEF;&#xFF0C;&#x800C;&#x7F51;&#x7EDC;&#x5B57;&#x8282;&#x7F16;&#x7801;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x5927;&#x7AEF;&#xFF0C;&#x6839;&#x636E;&#x901A;&#x4FE1;&#x534F;&#x8BAE;&#xFF0C;&#x7A0B;&#x5E8F;&#x53D1;&#x9001;&#x6570;&#x503C;&#x578B;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x9700;&#x8981;&#x8F6C;&#x6210;&#x7F51;&#x7EDC;&#x5B57;&#x8282;&#x5E8F;&#xFF08;&#x5927;&#x7AEF;&#xFF09;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x51FD;&#x6570;&#xFF1A;  </p>
<pre><code class="cpp">#include &lt;arpa/inet.h&gt;

uint32_t htonl(uint32_t hostlong);
uint16_t htons(uint16_t hostshort);
</code></pre>
<p>&#x7A0B;&#x5E8F;&#x4ECE;&#x7F51;&#x7EDC;&#x4E0A;&#x63A5;&#x6536;&#x6570;&#x503C;&#x578B;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x6309;&#x534F;&#x8BAE;&#xFF0C;&#x9700;&#x8981;&#x628A;&#x6570;&#x636E;&#x4ECE;&#x7F51;&#x7EDC;&#x5B57;&#x8282;&#x5E8F;&#xFF08;&#x5927;&#x7AEF;&#xFF09;&#x8F6C;&#x6210;&#x5C0F;&#x7AEF;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#xFF1A;</p>
<pre><code class="cpp">#include &lt;arpa/inet.h&gt;

uint32_t ntohl(uint32_t netlong);
uint16_t ntohs(uint16_t netshort);
</code></pre>
<p>&#x51FD;&#x6570;&#x975E;&#x5E38;&#x5BB9;&#x6613;&#x8BB0;&#x5FC6;&#xFF1A; <code>n</code>&#x8868;&#x793A;network&#xFF0C;<code>h</code>&#x8868;&#x793A;host&#xFF0C;<code>to</code>&#x8868;&#x793A;&#x8F6C;&#x6362;&#x65B9;&#x5411;&#x3002;</p>
<p>&#x82E5;&#x4E0D;&#x8F6C;&#x6362;&#xFF0C;&#x8FDB;&#x7A0B;&#x91CC;&#x7684;&#x6570;&#x503C;&#xFF1A;0x1234&#xFF0C;&#x5230;&#x4E86;&#x7F51;&#x7EDC;&#x5C31;&#x662F;&#xFF1A;0x3412&#x3002;  </p>
<p>&#x5BF9;&#x4E8E;mysql&#xFF0C;&#x6709;&#x65F6;&#x5019;&#x9700;&#x8981;&#x4FDD;&#x5B58;&#x4E00;&#x4E2A;&#x70B9;&#x5206;&#x8868;&#x793A;&#x6CD5;&#x7684;ip&#x5230;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x4F46;&#x53EF;&#x4EE5;&#x628A;ip&#x8F6C;&#x4E3A;&#x6570;&#x503C;&#x578B;&#xFF0C;&#x5165;&#x5E93;&#x4F7F;&#x7528;mysql&#x7684;&#x51FD;&#x6570;<code>inet_aton(&apos;1.2.3.4&apos;)</code>, sql&#x4F1A;&#x8F6C;&#x6210;&#x6570;&#x503C;16909060&#xFF0C; &#x9006;&#x64CD;&#x4F5C;&#x5219;&#x662F;<code>inet_ntoa(16909060)</code>&#x3002;</p>
<pre><code class="sql">mysql&gt; select inet_aton(&apos;1.2.3.4&apos;);
+----------------------+
| inet_aton(&apos;1.2.3.4&apos;) |
+----------------------+
|             16909060 |
+----------------------+

mysql&gt; select inet_ntoa(16909060);
+---------------------+
| inet_ntoa(16909060) |
+---------------------+
| 1.2.3.4             |
+---------------------+
</code></pre>
<p>&#x540C;&#x6837;&#x7684;&#xFF0C;<code>n</code>&#x8868;&#x793A;network&#xFF0C;<code>a</code>&#x8868;&#x793A;a dot&#x70B9;&#x5206;&#x6CD5;&#x3002;  </p>
<p><br><br>&#x2013; EOF &#x2013;</p>

	

	<div>
	    <div>Categories: <a class="category-link" href="/categories/in-think/">in_think</a> </div>
	    <div>Tags: <a class="tag-link" href="/tags/c/">c</a> </div>
	</div>
    </div>

    <hr />
    <footer class="article-footer">
      
        <a href="http://popozhu.github.io/2013/08/14/大端和小端/#disqus_thread" class="article-comment-link"></a>
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2013/08/15/openssl和多线程/" id="article-nav-newer" class="article-nav-link-wrap">
      <span class="article-nav-caption">&laquo;</span>
      <span class="article-nav-title">
        
          openssl和多线程
        
      </span>
    </a>
  
  
    <a href="/2013/07/27/在perl里使用kyotocabinet/" id="article-nav-older" class="article-nav-link-wrap">
      <span class="article-nav-title">在perl里使用KyotoCabinet</span>
      <span class="article-nav-caption">&raquo;</span>
    </a>
  
</nav>


  
</article>


<section id="comments">
  <div id="disqus_thread"> </div>
</section>


</section>

	    <footer id="footer">
    popozhu &copy; 2016 
</footer>

	</div>

	
<!--
<script src="//ajax.useso.com/ajax/libs/jquery/2.0.3/jquery.min.js" type="text/javascript"></script>
-->


<script>
  var disqus_shortname = 'popozhu';
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>


<script src="/js/script.js"></script>


    </body>
</html>
